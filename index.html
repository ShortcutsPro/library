<!-- Novel Updater -->
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="text/html" content="utf-8" />
    <meta name="viewport" content="size=device-width, initial-scale=1,viewport-fit=cover"/>
    <title>
      Bustl.â€¢io Updater
    </title>
    <style>
      @charset: utf-8;
      *,*::before,*::after {
        box-sizing: border-box;
        width: 100%;
        margin: 0;
        padding: 0;
        font-size: 1em/1.5em;
        font-style: normal;
        font-weight: normal;
      }
      html { 
        font-size:100%;
/*        font-family: Helvetica, Arial, Freesans, clean, sans-serif;*/
          font-family: -apple-system;
      }     
      body {
        margin: 0;
        padding: 1em;
        max-width: 100%;
      }
      img {
         max-width: 90%;
         object-fit: cover;
      }
      .icon {
         max-width: 70px;
         object-fit: cover;
         border: 1px solid white;
         border-radius: 9px;
       }
      @media (max-device-width: 480px) {
        body { margin:auto; max-width:100%;
      } 
      @media (min-device-width: 481px) { 
        body { margin:auto; max-width:600px; } 
      }
      @media (min-device-width: 640px) { 
        body { margin:auto; max-width:880px; } 
      }
      @media (min-device-width: 880px) { 
        body { margin:auto; max-width:1024; } 
      }
      h1 {
        font-family: -apple-system;
        color: black;
        font-weight: 800;
        font-size: 2em;
      }
      h2 {
        font-family: -apple-system;
        font-weight: 800;
        color: black;
        font-size: 1.7em;
      }
      h3, h4 {
        font-family: -apple-system;
        font-weight: 800;
        color: black;
        font-size: 1.3em;
      }
      p, ul {
        font-family: -apple-system;
        font-weight: 400;
        color: black;
        font-size: 1em;
      }
      blockquote {
        font-family: -apple-system;
        font-weight: 300;
        color: black;
        font-size: 1em;
        font-style: italic;
      }
      ol {
        font-family: -apple-system;
        font-weight: 400;
        color: black;
        font-size: 1em;
        margin: 15px;
      }
    a {
    color: black;
    }
  </style>
  </head>
  <body>
    <script>
      // Novel Updater
      //
      const Q = new URL(window.location.href).searchParams
      const sample = `{
  "result": "success",
  "id": 30472,
  "Version": "1.2",
  "URL": "https://www.icloud.com/shortcuts/ad0eb0b746fc4e82b81ce1f9d45db24c",
  "Release": "November 05, 2021",
  "Notes": "Contains bug fixes and the option to change the font name before install."
}`;
      function check(a, b) { 
        if (a != b) return true;  
        return false; 
      }
      
      function API(id, v) {
        let api = new XMLHttpRequest()
        api.open('GET', 'https://routinehub.co/api/v1/shortcuts/'+id+'/versions/latest', false)
        api.send()
        let response = api.responseText
        if (response != 'undefined' && response != 'null') {
          response = JSON.parse(response);
          if (check(v, response.Version)) {
            return response
          }
        }
          return false
      }
      
      function update(id, v) {
        const data = API(id, v)
        console.log(data)
        if (!data) return '';
        return `
<div>
  <center style="width:100%;">
    <div style="max-width:480px;">
      <hr />
      <br />
      <br />
      <h1 style="color:midnightblue;font-style:bold;">
        An Update Is Required
      </h1>
      <br />
       <!-- <img class="icon" src="${data.icon}" /> -->
      <br />
      <h3>
        <span style="font-style:bold;">
          ${Q.get('name')} 
        </span>
        version ${data.Version}
        <br />
        ${data.Notes}
      </h3>
      <br />
      <br />
      <h2>
        <a href="https://routinehub.co/download/${data.id}" style="color:darkred;font-style:bold;">Click [Here] To REPLACE</a>
      </h2>
      <br />
      <br />
      <hr />
       <!-- <iframe width="90%" height="640" border="none" src="${data.depiction}" hidden></iframe> -->
      <p>
        <a href="about:blank">ShortcutsPro Updater</a>
      </p>
    </div>
  </center>
</div>`
      }
      const div = document.createElement('div')
      // div.innerHTML = update('10398', '1.1')
      div.innerHTML = update(Q.get('id'), Q.get('v'))
      document.body.appendChild(div)
    </script>
  </body>
</html>